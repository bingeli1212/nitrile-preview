---
title: Produce Fitting Pages
---

# The \startTEXpage command

Normally you would produce PDF pages with \starttext command.
The text placed between the \starttext and \endtext commands would
be paginated and their contents being used to produce enough PDF
pages to hold these contents.

    \showframe
    \startTEXpage
    asdf
    \stopTEXpage
    
This would produce a page that is just large enough to 
hold the string "asdf". Following is another example.

    \showframe
    \startTEXpage[offset=10pt]
    asdf
    \stopTEXpage
    
This would produce a page that is slightly larger
than the one done by the previous example. This page would 
have a 10pt padding between the text and the four edges of the
page.

    \setuppapersize[A10,landscape]
    \showframe[]
    \starttext
    asdf
    \stoptext
    
This previous command would have produced a page that is
exactly the same size as a A10 paper.


# The \startMPpage command

This command and the command \stopMPpage is to produce a single PDF
page that is the same size as the picture that is just big enough
to hold the drawing done by the MP commands between these two commands.

    \starttext
    \startMPpage
      draw fullcircle scaled 2cm ;
      dotlabel.bot(textext("(0,0)"),origin);
    \stopMPpage
    
    \stopMPpage
      draw fullcircle scaled 2cm ;
      drawarrow (0,0)--(1cm,0) ;
      label.bot(textext("$r$"),(5mm,0)) ;
    \stopMPpage
    \stoptext
    
See figure &ref{pages:mppage} for the drawings of the two pages
generated by the previous program.

@ figure
  &label{pages:mppage}
  
  ```img{frame,width:4cm}
  image image-pages-0.png
  ```
  
  ```img{frame,width:4cm}
  image image-pages-1.png
  ```
  
  
# The Hybrid Mode

Following is an example of producing a two page PDF document,
where the first page is a cover page consisting entirely of a
MetaFun graphics. See figure \&ref{pages:hybrid} for 
the looks of two resulting PDF pages.

    \startcomponent hybrid-titlepage
    \environment hybrid-environment
    \definefont[TitlePageFontA][file:lmmonoproplt10-bold*default]
    \definefont[TitlePageFontB][file:lmmonolt10-bold*none]
    \start \startMPpage
      StartPage ;
        numeric o, w, h, d ; o := 4mm ;
        picture p[], q, t ;
        t := textext("\white\TitlePageFontA MkIV Hybrid Technology") ;
        t := ((t rotated 90) ysized (PaperHeight - 2o)) ;
        p[1] := textext("\gray\TitlePageFontB\char123\char125") ;
        p[2] := textext("\gray\TitlePageFontB()") ;
        p[3] := textext("\gray\TitlePageFontB<>") ;
        d := bbwidth(t) + 2o ;
        q := image ( for i=1 upto 8 :
          for j=1 upto 20 :
            q := p[1+floor(uniformdeviate 3)] 
              xysized (PaperWidth/20 + uniformdeviate PaperWidth/40, 
                      PaperHeight/15 + uniformdeviate PaperHeight/30) ;
            w := i * (PaperWidth - d)/10 ;
            h := j * PaperHeight/10 ;
            q := q shifted (w,h) ;
            draw q;
          endfor ;
        endfor ; ) ;
        q := (q shifted -llcorner q) xysized 
             (PaperWidth - d - 2o, PaperHeight - 2o) shifted (o,o) ;
        fill Page enlarged (o/2) withcolor \MPcolor{yellow} ;
        draw thelabel.ulft(t,lrcorner Page shifted (-o,o)) ;
        draw q ;
      StopPage ;
    \stopMPpage \stop
    \setuppagenumber[state=stop] 
    \page[empty] 
    \setuppagenumber[state=start]
    \stopcomponent
    
@ figure
  &label{pages:hybrid}
  
  ```img{frame,width:4cm}
  image image-pages-2.png
  ```
  ```img{frame,width:4cm}
  image image-pages-3.png
  ```
  
# Another Example

Following is another example that would produce a single
page containing a MetaFun drawing. The result is shown 
in figure &ref{pages:curve}.

    \startMPpage[instance=doublefun]
       pen savedpen ; savedpen := currentpen ;
       pickup pencircle scaled .01 ;
       numeric stp ; stp := 1 ;
       path p ;
       p := for i=0 step stp until 1000 :
         for j=0 step stp until 1000 :
           hide(x := 2i/1000 ; y := 2.5j/1000 - 2 ;)
           if abs(2*(x**5)+x*y+y**5) < .002i/1000 : (x,y) .. fi
         endfor
       endfor cycle ;
       draw subpath (0,length p - 1) of p ;
       setbounds currentpicture to 
         (0,-2)--(2,-2)--(2,.5)--(0,.5)--cycle ;
       currentpicture := currentpicture xsized 5cm ;
       pickup savedpen ;
       picture pic ; pic := currentpicture ;
       drawarrow llcorner pic--lrcorner pic ;
       drawarrow llcorner pic--ulcorner pic ;
       label.rt ("$x$", lrcorner pic) ;
       label.top("$y$", ulcorner pic) ;
       for x=0 step .5 until 2 :
         label.bot(decimal x,(x/2)[llcorner pic,lrcorner pic]) ;
       endfor ;
       for y=0 step .5 until 2.5 :
         label.lft(decimal (y-2),(y/2.5)[llcorner pic,ulcorner pic]) ;
       endfor ;
    \stopMPpage
            
@ figure
  &label{pages:curve}
  
  ```img{frame,width:4cm}
  image image-pages-4.png
  ```
  
  
